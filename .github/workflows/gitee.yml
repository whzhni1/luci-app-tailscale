name: åŒæ­¥åˆ° Gitee

on:
  push:
    branches: [ main, master ]

env:
  ä»“åº“åç§°: "luci-app-tailscale"
  GitHubç”¨æˆ·å: "whzhni1"
  Giteeç”¨æˆ·å: "whzhni"

jobs:
  åŒæ­¥ä»»åŠ¡:
    runs-on: ubuntu-latest
    steps:
      - name: æ£€å‡ºä»£ç 
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: æ˜¾ç¤ºåŒæ­¥ä¿¡æ¯
        run: |
          echo "ğŸš€ å¼€å§‹åŒæ­¥ä»“åº“åˆ° Gitee"
          echo "ğŸ“¦ æºä»“åº“: github/${{ env.GitHubç”¨æˆ·å }}/${{ env.ä»“åº“åç§° }}"
          echo "ğŸ¯ ç›®æ ‡ä»“åº“: gitee/${{ env.Giteeç”¨æˆ·å }}/${{ env.ä»“åº“åç§° }}"

      - name: æ‰§è¡ŒåŒæ­¥åˆ°Gitee
        uses: Yikun/hub-mirror-action@master
        with:
          src: github/${{ env.GitHubç”¨æˆ·å }}
          dst: gitee/${{ env.Giteeç”¨æˆ·å }}
          static_list: ${{ env.ä»“åº“åç§° }}
          force_update: true
          debug: true
        env:
          # å…³é”®ä¿®æ”¹ï¼šä½¿ç”¨ GITEE_TOKEN è€Œä¸æ˜¯ SSH å¯†é’¥
          GITEE_TOKEN: ${{ secrets.GITEE_TOKEN }}

      - name: åŒæ­¥æˆåŠŸé€šçŸ¥
        if: success()
        run: |
          echo "âœ… åŒæ­¥æˆåŠŸï¼Gitee ä»“åº“å·²æ›´æ–°"
          echo "ğŸ“Š æŸ¥çœ‹æœ€æ–°ä»£ç : https://gitee.com/${{ env.Giteeç”¨æˆ·å }}/${{ env.ä»“åº“åç§° }}"
